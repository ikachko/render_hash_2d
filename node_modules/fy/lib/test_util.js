// Generated by IcedCoffeeScript 108.0.11
(function() {
  var assert, module;

  assert = require('assert');

  module = this;

  this.json_eq = function(a, b) {
    return assert.strictEqual(JSON.stringify(a, null, 2), JSON.stringify(b, null, 2));
  };

  this.wrap = function(fn, fin) {
    var e, old_exit, old_p, old_perr, old_pp, old_puts, _e;
    old_perr = global.perr;
    old_pp = global.pp;
    old_p = global.p;
    old_puts = global.puts;
    old_exit = process.exit;
    global.perr = function() {};
    global.pp = function() {};
    global.p = function() {};
    global.puts = function() {};
    process.exit = function() {
      throw new Error("process.exit stub");
    };
    e = null;
    try {
      fn();
    } catch (_error) {
      _e = _error;
      e = _e;
    }
    global.perr = old_perr;
    global.pp = old_pp;
    global.p = old_p;
    global.puts = old_puts;
    process.exit = old_exit;
    if (typeof fin === "function") {
      fin();
    }
    if (e) {
      throw e;
    }
  };

  this.not_throws = function(t, fin) {
    module.wrap(t, fin);
  };

  this.throws = function(t, fin) {
    module.wrap(function() {
      return assert.throws(t);
    }, fin);
  };

}).call(this);
